---
  parameters:
  - name: appname
    default: demo
  - name: instance_type
    default: t2.micro
  - name: vpc
    cloudtype: AWS::EC2::VPC::Id
    default: <%= MU.myVPC %>

# BEGIN APPLICATION DEFINITION
  appname: <%= appname %>
  servers: 
    - 
      name: gitlab-runner-debian
      size: <%= instance_type %>
      platform: ubuntu
      storage:
      -
        size: 16
      skipinitialupdates: true
      run_list:
        - recipe[demo::gitlab_runner]
      vpc:
        vpc_id: <%= vpc %>
        subnet_pref: public
    - 
      name: gitlab-runner-rhel
      size: <%= instance_type %>
      platform: centos7
      storage:
      -
        size: 16
      skipinitialupdates: true
      run_list:
        - recipe[demo::gitlab_runner]
      vpc:
        vpc_id: <%= vpc %>
        subnet_pref: public
      